{% extends 'configmanager/__base__.html' %}
{% block title %}站点列表 | {% endblock %}
{% block content %}
<h2>站点管理 > 站点列表</h2>
{% if Site_list %}
    <ul class="object-tools">     
        <li>     
            <a href="" class="link">
                刷新所有ECS监控数据
            </a>
        </li>
    </ul>
    <ul>
    <table border="1">
    <th>站点名称</th>
    <th>站点简称</th>
    <th>配置文件夹名称</th>
    <th>配置文件名称</th>
    <th>所属ECS</th>
    <th>操作</th>
    {% for site in Site_list %}
    <tr>
        <td><a href="{% url 'configmanager:sitechange' site.id %}">{{ site.fullname }}</a></td>
        <td>{{ site.shortname }}</td>
        <td>{{ site.configdirname }}</td>
        <td>
            {% for configfile in site.configfile_set.all %}
                <span>{{ configfile.filename }}</span><br />
            {% endfor %}
        </td>
        <td>
            {% for ecs in site.ECSlists.all %}
                <span>{{ ecs }}</span><br />
            {% endfor %}
        </td>
        <td>
            &nbsp;<a href="{% url 'configmanager:sitechange' site.id %}">修改</a>&nbsp;
            &nbsp;<a href="{% url 'configmanager:sitedelete' site.id %}">删除</a>&nbsp;
        </td>
    </tr>
    {% endfor %}
    </ul>
{% else %}
    <p>No ECS are available.</p>
{% endif %}
{% endblock %}
