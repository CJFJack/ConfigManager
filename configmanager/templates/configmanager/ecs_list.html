{% extends 'configmanager/__base__.html' %}
{% block title %}ECS列表 | {% endblock %}
{% block goback %}{% url 'configmanager:index' %}{% endblock %}
{% block content %}
<h2>ECS管理 > ECS列表</h2>
{% if ECS_list %}
    <ul class="object-tools">
        <li>
            <a href="{% url 'configmanager:updateallmonitor' %}"  class="link">刷新所有ECS监控数据</a>
        </li>
        <li>
            <a href="{% url 'configmanager:updateallinfo' %}"  class="link">刷新所有ECS基础信息</a>
        </li>
    </ul>
    <ul>
    <table border="1">
    <th>区域</th>
    <th>网络类型</th>
    <th>ECS名称</th>
    <th>实例ID</th>
    <th>系统类型</th>
    <th>系统版本</th>
    <th>内网IP地址</th>
    <th>外网IP地址</th>
    <th>配置规格</th>
    <th>使用状态</th>
    <th>运行状态</th>
    <th>过期时间</th>
    <th>修改人</th>
    <th>修改日期</th>
    <th>操作</th>
    <th>CPU使用率<th>
    <th>内存使用率<th>
    <th>磁盘使用率<th>
    {% for ecs in ECS_list %}
    <tr>
        <td>{{ ecs.regionId }}</td>
        <td>{{ ecs.networktype }}</td>
        <td><a href="{% url 'configmanager:ecschange' ecs.id %}">{{ ecs.name }}</a></td>
        <td>{{ ecs.instanceid }}</td>
        <td>{{ ecs.ostype }}</td>
        <td>{{ ecs.osname }}</td>
        <td>{{ ecs.IP }}</td>
        <td>{{ ecs.publicipaddress }}</td>
        <td>CPU:{{ ecs.cpu }}核 内存:{{ ecs.memory }}G</td>
        <td>
            {% if ecs.status == 'Y' %}<span>启用</span>
            {% else %}<span>禁用</span>
            {% endif %}
        </td>
        <td>{{ ecs.instancestatus }}</td>
        <td>{{ ecs.expiredtime }}</td>
        <td>{{ ecs.modified_user }}</td>
        <td>{{ ecs.modified_time }}</td>
        <td>
            &nbsp;<a href="{% url 'configmanager:ecschange' ecs.id %}">修改</a>&nbsp;
            &nbsp;<a href="{% url 'configmanager:ecsdelete' ecs.id %}">删除</a>&nbsp;
            &nbsp;<a href="{% url 'configmanager:ecsenable' ecs.id %}">启用</a>&nbsp;
            &nbsp;<a href="{% url 'configmanager:ecsdisable' ecs.id %}">禁用</a>&nbsp;
            &nbsp;<a href="{% url 'configmanager:updatemonitor' ecs.id %}">刷新监控数据</a>&nbsp;
            &nbsp;<a href="{% url 'configmanager:updateinfo' ecs.id %}">刷新基础信息</a>&nbsp;
        </td>
        <td><font {% if ecs.recently_cpu > 70 %}color="red"{% endif %}>{{ ecs.recently_cpu }}%</font><td>
        <td><font {% if ecs.recently_memory > 70 %}color="red"{% endif %}>{{ ecs.recently_memory }}%</font><td>
        <td><font {% if ecs.recently_diskusage > 70 %}color="red"{% endif %}>{{ ecs.recently_diskusage }}%</font><td>
    </tr>
    {% endfor %}
    </ul>
{% else %}
    <p>No ECS are available.</p>
{% endif %}
{% endblock %}
